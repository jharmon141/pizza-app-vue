webpackJsonp([1],{"C/4p":function(t,e){},"H5/V":function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("7+uW"),a=i("2R8v"),s=i.n(a),o=i("tlQw"),r=i.n(o),c=s()(["\nquery  {\n    allPizzas {\n        name\n        basePrice\n        maxToppings\n        toppings {\n          defaultSelected\n          name\n          price\n        }\n    }\n}"],["\nquery  {\n    allPizzas {\n        name\n        basePrice\n        maxToppings\n        toppings {\n          defaultSelected\n          name\n          price\n        }\n    }\n}"]),l={name:"App",data:function(){return{allPizzas:!1}},apollo:{allPizzas:r()(c)}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view",this._b({},"router-view",{allPizzas:this.allPizzas},!1))],1)},staticRenderFns:[]};var p=i("VU/8")(l,u,!1,function(t){i("vVMB"),i("C/4p")},null,null).exports,d=i("/ocq"),z=i("woOf"),m=i.n(z),v=i("NYxO");n.a.use(v.a);var h=new v.a.Store({state:{pizzas:[],nextPizzaId:1},mutations:{addPizza:function(t,e){var i=m()({},e,{id:t.nextPizzaId});t.nextPizzaId+=1,t.pizzas.push(i)},removePizza:function(t,e){t.pizzas=t.pizzas.filter(function(t){return t.id!==e})},updatePizza:function(t,e){var i=t.pizzas.findIndex(function(t){return t.id==e.id});t.pizzas.splice(i,1,e)}},actions:{handleAddPizza:function(t,e){t.state;(0,t.commit)("addPizza",e)},handleRemovePizza:function(t,e){t.state;(0,t.commit)("removePizza",e)},handleUpdatePizza:function(t,e){t.state;(0,t.commit)("updatePizza",e)}}}),f={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"form"}},[i("div",{staticClass:"columns"},[i("div",{staticClass:"column is-4 is-offset-4"},[i("h1",{attrs:{id:"size"}},[t._v("Size: "+t._s(t.pizza.name.toUpperCase()))]),t._v(" "),i("h3",{attrs:{id:"base-price"}},[t._v("Base price: $"+t._s(t.pizza.basePrice.toFixed(2)))]),t._v(" "),i("h3",{attrs:{id:"max-toppings"}},[t._v("Max number of toppings: "+t._s(t.maxToppingDisplay))])])]),t._v(" "),i("div",{staticClass:"columns"},[t._m(0),t._v(" "),i("div",{staticClass:"column is-3",attrs:{id:"toppings"}},t._l(t.pizza.toppings,function(e){return i("div",[t.maxToppingsNotReached||t.chosenToppings.includes(e)?i("input",{directives:[{name:"model",rawName:"v-model",value:t.chosenToppings,expression:"chosenToppings"}],attrs:{type:"checkbox",id:e.name},domProps:{value:e,checked:e.defaultSelected,checked:Array.isArray(t.chosenToppings)?t._i(t.chosenToppings,e)>-1:t.chosenToppings},on:{change:function(i){var n=t.chosenToppings,a=i.target,s=!!a.checked;if(Array.isArray(n)){var o=e,r=t._i(n,o);a.checked?r<0&&(t.chosenToppings=n.concat([o])):r>-1&&(t.chosenToppings=n.slice(0,r).concat(n.slice(r+1)))}else t.chosenToppings=s}}}):i("input",{attrs:{type:"checkbox",disabled:""}}),t._v(" "),i("label",{attrs:{for:e.name}},[t._v(t._s(e.name)+" ($"+t._s(e.price.toFixed(2))+")")])])}))]),t._v(" "),i("div",{staticClass:"columns"},[i("div",{staticClass:"column is-4 is-offset-4"},[t._v("\n      Quantity: \n      "),i("div",{staticClass:"select"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.quantity,expression:"quantity"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.quantity=e.target.multiple?i:i[0]}}},t._l(t.quantityOptions,function(e){return i("option",{domProps:{value:e}},[t._v(t._s(e))])}))])])]),t._v(" "),i("div",{staticClass:"columns total"},[i("div",{staticClass:"column is-4 is-offset-4"},[t._v("\n      Total: $"+t._s(t.grandTotal.toFixed(2))+"\n    ")])]),t._v(" "),i("div",{staticClass:"columns"},[i("div",{staticClass:"column is-4 is-offset-4"},[i("span",{staticClass:"button is-outlined",on:{click:t.handleResetForm}},[t._v("Go back")]),t._v(" "),i("span",{staticClass:"button is-outlined",on:{click:t.handleSubmitPizza}},[t._v("Add to cart")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"column is-3 is-offset-3"},[e("h4",[this._v("Select your toppings:")])])}]};var _=i("VU/8")({name:"Form",props:["pizza","resetForm"],mounted:function(){var t=this;this.pizza.toppings.forEach(function(e){e.defaultSelected&&t.chosenToppings.push(e)})},data:function(){return{chosenToppings:[],quantityOptions:[1,2,3,4,5,6,7,8,9,10],quantity:1}},methods:{handleResetForm:function(){this.$emit("resetForm")},handleSubmitPizza:function(){var t={toppings:this.chosenToppings,size:this.pizza.name,pricePerPizza:this.pricePerPizza,quantity:this.quantity};this.$store.dispatch("handleAddPizza",t),this.$router.push({name:"Cart"})}},computed:{maxToppingDisplay:function(){return 0===this.pizza.maxToppings?"Unlimited!":this.pizza.maxToppings},maxToppingsNotReached:function(){return 0===this.pizza.maxToppings||this.pizza.maxToppings>this.chosenToppings.length},pricePerPizza:function(){var t=this.pizza.basePrice;return(this.chosenToppings.reduce(function(t,e){return t+e.price},0)+t).toFixed(2)},grandTotal:function(){return this.pricePerPizza*this.quantity}}},f,!1,function(t){i("iTfJ")},"data-v-6f9ad974",null).exports,P={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"columns",attrs:{id:"size-menu"}},[i("div",{staticClass:"column is-4 is-offset-4"},[i("h2",[t._v("Choose a size:")]),t._v(" "),i("div",{staticClass:"select"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selected=e.target.multiple?i:i[0]}}},t._l(t.allPizzas,function(e){return i("option",{key:e.name,domProps:{value:e.name}},[t._v(t._s(e.name.toUpperCase()))])})),t._v(" "),i("a",{staticClass:"button is-outlined",on:{click:t.handleSubmitPizza}},[t._v("Submit")])])])])},staticRenderFns:[]};var C={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"columns cart-link"},[i("div",{staticClass:"column is-2 is-offset-10"},[i("router-link",{attrs:{to:"/cart"}},[t._v("("+t._s(t.quantity)+") Cart")])],1)])},staticRenderFns:[]};var g={render:function(){var t=this.$createElement;return(this._self._c||t)("span",[this._v("Loading...")])},staticRenderFns:[]},y={name:"Home",components:{SizeMenu:i("VU/8")({name:"SizeMenu",props:["allPizzas","submitPizzaSize"],data:function(){return{selected:"small"}},methods:{handleSubmitPizza:function(){this.$emit("submitPizzaSize",this.selected)}}},P,!1,function(t){i("mRv2")},"data-v-9710157e",null).exports,CartLink:i("VU/8")({name:"CartLink",props:[],computed:{quantity:function(){return this.$store.state.pizzas.reduce(function(t,e){return t+e.quantity},0)}}},C,!1,function(t){i("zDCi")},"data-v-e8c80ef4",null).exports,PizzaForm:_,Loading:i("VU/8")({name:"Loading"},g,!1,null,null,null).exports},props:["allPizzas"],data:function(){return{sizeChosen:!1,selectedSize:"",pizza:{}}},methods:{submitPizzaSize:function(t){this.selectedSize=t,this.pizza=this.allPizzas.find(function(e){return e.name==t}),this.sizeChosen=!0},resetForm:function(){this.sizeChosen=!1,this.pizza={}}}},x={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"home"}},[i("CartLink"),t._v(" "),t.allPizzas?t.sizeChosen?i("PizzaForm",{attrs:{pizza:t.pizza},on:{resetForm:t.resetForm}}):i("SizeMenu",{attrs:{allPizzas:t.allPizzas},on:{submitPizzaSize:t.submitPizzaSize}}):i("Loading")],1)},staticRenderFns:[]},T=i("VU/8")(y,x,!1,null,null,null).exports,b={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",[i("td",[t._v(t._s(t._f("Capitalize")(t.pizza.size)))]),t._v(" "),i("td",[i("ul",t._l(t.pizza.toppings,function(e,n){return i("li",{key:e.name},[t._v("\n        "+t._s(e.name)+"\n      ")])}))]),t._v(" "),i("td",[i("div",{staticClass:"select"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.quantity,expression:"quantity"}],on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.quantity=e.target.multiple?i:i[0]},t.handleUpdateQuantity]}},t._l(t.quantityOptions,function(e){return i("option",{key:e,domProps:{value:e}},[t._v("\n          "+t._s(e)+"\n        ")])}))])]),t._v(" "),i("td",[t._v("\n    $"+t._s(t.price)+"\n  ")]),t._v(" "),i("td",[i("span",{staticClass:"delete",on:{click:t.handleDelete}},[t._v("\n      X\n    ")])])])},staticRenderFns:[]};var q={name:"Cart",components:{CartItem:i("VU/8")({name:"CartItem",props:["pizza"],data:function(){return{quantity:null,quantityOptions:[1,2,3,4,5,6,7,8,9,10]}},mounted:function(){this.quantity=this.pizza.quantity},filters:{Capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}},methods:{handleDelete:function(){var t=this.pizza.id;this.$store.dispatch("handleRemovePizza",t)},handleUpdateQuantity:function(){var t={id:this.pizza.id,toppings:this.pizza.toppings,size:this.pizza.size,pricePerPizza:this.pizza.pricePerPizza,quantity:this.quantity};this.$store.dispatch("handleUpdatePizza",t)}},computed:{price:function(){return(this.pizza.pricePerPizza*this.quantity).toFixed(2)}}},b,!1,function(t){i("H5/V")},null,null).exports},computed:{pizzas:function(){return this.$store.state.pizzas},grandTotal:function(){return this.pizzas.reduce(function(t,e){return t+e.pricePerPizza*e.quantity},0).toFixed(2)}}},k={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"cart"}},[0==t.pizzas.length?i("div",{staticClass:"empty",attrs:{id:"empty"}},[i("div",{staticClass:"columns"},[i("div",{staticClass:"column is-4 is-offset-4"},[i("h1",[t._v("Your cart is empty")]),t._v(" "),i("router-link",{staticClass:"button is-outlined",attrs:{to:"/"}},[t._v("Add pizzas")])],1)])]):i("div",{staticClass:"cart"},[i("div",{staticClass:"columns"},[i("div",{staticClass:"column is-2 is-offset-10 back-link"},[i("router-link",{attrs:{to:"/"}},[t._v("Go back")])],1)]),t._v(" "),t._m(0),t._v(" "),i("div",{staticClass:"columns"},[i("div",{staticClass:"column is-8 is-offset-2"},[i("table",{staticClass:"table is-fullwidth"},[t._m(1),t._v(" "),i("tbody",t._l(t.pizzas,function(t){return i("CartItem",{key:t.id,attrs:{pizza:t}})}))])])]),t._v(" "),i("div",{staticClass:"columns"},[i("div",{staticClass:"column is-4 is-offset-4"},[i("h3",[t._v("Order Total: $"+t._s(t.grandTotal))])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"columns"},[e("div",{staticClass:"column is-4 is-offset-4"},[e("h1",[this._v("Your Cart")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",[i("th",[t._v("Size")]),t._v(" "),i("th",[t._v("Toppings")]),t._v(" "),i("th",[t._v("Quantity")]),t._v(" "),i("th",[t._v("Price")]),t._v(" "),i("th",[t._v("Remove")])])])}]};var F=i("VU/8")(q,k,!1,function(t){i("sAGE")},"data-v-1d1704d5",null).exports;n.a.use(d.a);var $=new d.a({routes:[{path:"/",name:"Home",component:T},{path:"/cart",name:"Cart",component:F}]}),S=i("u1/p"),w=i("rp1p"),R=i("+dIz"),A=i("69U5");n.a.config.productionTip=!1;var U=new w.a({uri:"https://api.graph.cool/simple/v1/cjdawo5qu355s0130idyq29ze"}),E=new S.a({link:U,cache:new R.a,connectToDevTools:!0}),V=new A.a({defaultClient:E});n.a.use(A.a),new n.a({el:"#app",apolloProvider:V,store:h,router:$,components:{App:p},template:"<App/>"})},iTfJ:function(t,e){},mRv2:function(t,e){},sAGE:function(t,e){},vVMB:function(t,e){},zDCi:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.03081ca9f8882834caed.js.map